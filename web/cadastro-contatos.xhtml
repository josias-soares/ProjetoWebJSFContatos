<ui:composition template="template.xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="conteudo">
        <h:form>
            <p:growl id="messages" />
            <h:inputHidden id="id" value="#{cadastroContatoBean.contato.id}"/>            

            <fieldset>
                <legend>Cadastro de Contatos</legend>

                <div class="form-group">
                    <h:outputLabel value="Nome" for="nome"/>
                    <h:inputText id="nome" styleClass="form-control" value="#{cadastroContatoBean.contato.nome}" label="Nome" required="true" pt:autofocus="true"/>
                </div>

                <div class="form-group">
                    <h:outputLabel value="Email" for="email"/>
                    <div class="input-group">
                        <span class="input-group-addon">@</span>                        
                        <h:inputText id="email"  styleClass="form-control" value="#{cadastroContatoBean.contato.email}" label="Email" required="true" validatorMessage="O email é inválido" valueChangeListener="#{cadastroContatoBean.emailChanged}" >
                            <f:validateRegex pattern="[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\.[a-zA-Z]{2,4}" />
                            <f:ajax render="@this messages" execute="@this id"/>
                        </h:inputText>
                    </div>
                </div>

                <div class="form-group">
                    <h:outputLabel value="Data de Nascimento" for="dataNascimento"/>
                    <h:inputText id="dataNascimento" pt:type="date" styleClass="form-control"  value="#{cadastroContatoBean.contato.dataNascimento}" label="Data de Nascimento" required="true">
                        <f:converter converterId="dateCalendarConverter"/>
                        <f:ajax render="messages"/>
                    </h:inputText>
                </div>

                <div class="form-group">
                    <h:outputLabel value="Endereço" for="endereco"/>
                    <h:inputText id="endereco" styleClass="form-control" label="Endereço" value="#{cadastroContatoBean.contato.endereco}"/>                
                </div>
            </fieldset>

            <div class="btn-group">
                <h:commandButton class="btn btn-primary" value="Enviar" action="#{cadastroContatoBean.grava}"/>
                <h:button class="btn btn-default" value="Lista de Contatos" outcome="lista-contatos"/>
            </div>
        </h:form>
    </ui:define>
</ui:composition>
